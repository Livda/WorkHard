\documentclass[a4paper, 11pt]{report}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[frenchb,francais]{babel}
\usepackage[nottoc,notlof,notlot]{tocbibind}
\usepackage{geometry, graphicx,verbatim,appendix,amssymb,enumitem,xspace,hyperref}
\hypersetup {
    colorlinks = true,
    allcolors = black
}

\include{alias}

\begin{document}
\renewcommand{\bibname}{Références}

\begin{titlepage}
    \includegraphics[height=50px]{logo_insa.png}
    \hspace{0.35\textwidth}
    \includegraphics[height=50px]{logo_logilink.png}
    \begin{center}
        \vspace{7cm}
        {\huge\bfseries Création d'un agenda collaboratif : AgendaDirect \par}
        \vspace{0.5cm}
        {\Large Département Informatique - Année scolaire 2015/2016\par}
    \end{center}
    \vfill

    % Bottom of the page
    Diffusion du rapport (y compris en version électronique) :

    \begin{itemize}[label=$\square$]
        \item Non autorisée (le rapport ne sera pas diffusé, mais archivé par obligation légale)
        \item Autorisée en interne à l’INSA
        \item Autorisée en interne et en externe
    \end{itemize}

    \vspace{0.5cm}

    \begin{tabular}{ll}
        {\Large Auteur :}             & M.~Aurélien \textsc{Fontaine}\\
        {\Large Maître de stage :}    & Mme.~Gabrielle \textsc{Harley}\\
        {\Large Correspondant INSA :} & M.~Bertrand \textsc{Coüasnon}\\
    \end{tabular}
\end{titlepage}

\chapter*{Remerciements}

Il n'est jamais facile pour un étudiant de trouver un stage, c'est pourquoi je remercie l'entreprise LOGILINK de m'avoir accueilli durant ces 4 mois.

Je tiens à remercier tout particulièrement M. Michel Imbert et Mme Gabrielle Harlay, dirigeants de l'entreprise LOGILINK,  qui m'ont accordé leur confiance et attribué une mission valorisante durant ce stage, et M. Jérôme Harlay, qui m'a conseillé pour tout la partie graphique de mon site web. Je remercie également toute l'équipe pour leur accueil et leur esprit d'équipe.

Faire mon stage de $4^e$ année dans votre entreprise a été un plaisir, j'ai pu apprendre beaucoup grâce à vous.

\tableofcontents

\chapter{Présentation}
\section{Présentation de l'entreprise}
\lgk\cite{logilink}, société implantée à Marseille, est spécialisée dans le secteur d'activité de la programmation informatique principalement pour des entreprises travaillant dans l'immobilier. Cette entreprise développe notamment \ulti, un logiciel métier regroupant de nombreuses fonctionnalités liées à l’immobilier comme la gérance ou le syndic. \lgk créé et des sites web pour de nombreuses agences immobilières sur Marseille.

\section{Présentation du stage}
L'objectif de ce stage a été de développer une application de calendrier collaboratif afin de se passer des licences Exchange\cite{ex} ou Google Calendar\cite{gcal}. Afin de répondre à cette problématique, j'ai développé un site web avec le framework\footnote{En programmation informatique, un framework ou structure logicielle est un ensemble cohérent de composants logiciels structurels, qui sert à créer les fondations ainsi que les grandes lignes de tout ou d'une partie d'un logiciel (architecture). \textit{Wikipedia - septembre 2017}} \php\cite{php}, \symfony\cite{symfony}.

\chapter{Travail réalisé}
\section{L'étude}
L'application doit répondre à des exigences multiples.
    \subsection{Les interfaces}
        \subsubsection{Côté utilisateur}
        L'utilisateur doit avoir avoir accès à des fonctionnalités standards :
        \begin{itemize}
            \item gestion de son propre agenda :
            \begin{itemize}
                \item création de rendez-vous,
                \item édition des rendez-vous,
                \item annulation,
                \item suppression;
            \end{itemize}
            \item possibilité d'inviter d'autres utilisateurs à ses rendez-vous ;
            \item possibilité de voir les horaires d'un autre utilisateur de l'entreprise ;
            \item possibilité de voir les disponibilités de tout un groupe d'utilisateurs.
        \end{itemize}
        \subsubsection{Côté administrateur}
        L'administrateur à accès à toutes les fonctionnalités d'un utilisateur normal. Mais il doit avoir quelques privilèges supplémentaire :
        \begin{itemize}
            \item avoir une interface simplifiée de gestion des utilisateurs :
            \begin{itemize}
                \item création d'un utilisateur avec des droits d'administrateur ou d'utilisateur,
                \item modification du profil d'un utilisateur,
                \item suppression d'un utilisateur ;
            \end{itemize}
            \item pouvoir voir l'agenda de chaque utilisateur ;
            \item pouvoir gérer les groupes d'utilisateurs :
            \begin{itemize}
                \item créer un groupe d'utilisateurs,
                \item ajouter ou supprimer des gens de ce groupe.
            \end{itemize}
        \end{itemize}
        \subsubsection{Côté super administrateur}
        Le super administrateur doit pouvoir gérer les entreprises, c'est à dire :
        \begin{itemize}
            \item créer une entreprise avec un administrateur ;
            \item révoquer l'accès à l'application d'une entreprise ;
            \item supprimer définitivement une entreprise de l'application.
        \end{itemize}
    \subsection[Le backend]{Le backend\footnote{En informatique, un back-end (parfois aussi appelé un arrière-plan) est un terme désignant un étage de sortie d'un logiciel devant produire un résultat. On l'oppose au front-end (aussi appelé un frontal) qui lui est la partie visible de l'iceberg. \textit{Wikipedia - septembre 2017}}}
        \subsubsection{Le stockage}
        \begin{itemize}
            \item pour une gestion simplifiée des entreprises et une meilleure séparation des données, une base de donnée par entreprise est requise ;
            \item  le site web final est hébergé chez \oswitch\cite{oswitch}, il faut donc une compatibilité avec les services proposés par cette entreprise.
        \end{itemize}

        \subsubsection{La qualité du code}
        Ce site étant destiné à évoluer et à être utilisé, une réelle attention à été portée à la reprise de celui ci. Pour ce faire, il faut :
        \begin{itemize}
            \item utiliser une technologie bien documentée, stable et qui ne risque pas d'être abandonnée dans quelques années par ses développeurs ;
            \item produire un code avec une structure pour permettre la compréhension ;
            \item insérer des commentaires dans le code pour une meilleure compréhension des algorithmes et de la logique des interactions.
        \end{itemize}
    \subsection{Les petits plus}
    Si le temps le permettait, quelques fonctionnalités non essentielles devaient être implémentées :
    \begin{itemize}
        \item la géolocalisation des rendez-vous ;
        \item des notifications en temps réel ;
        \item un glisser-déposer pour changer l'heure d'un rendez-vous ;
        \item un étirement d'un rendez-vous, pour en augmenter ou diminuer la durée ;
        \item un système d'étiquettes : privé, congés, réunion, etc ;
        \item une synchronisation avec les logiciels déjà développés par \lgk.
    \end{itemize}

\section{Le développement}
Le développement du site \agenda s'est passé en plusieurs étapes. La partie fonctionnelle du site a été faite en premier. Ensuite, une refonte graphique du site a été faite, avec quelques ajustements des fonctionnalités.
    \subsection{La partie fonctionnelle}
    La partie fonctionnelle (le backend) a été la partie la plus longue du stage, aux alentours de 3 mois.

    Le développement de cette partie a été grandement facilitée par l'utilisation de \symfony et de tous ses bundles\footnote{Un bundle est un ensemble de fichiers structurés dans un répertoire qui implémente une seule fonctionnalité \textit{symfony.com - septembre 2017}}. Notamment, le bundle \textit{FOSUserBundle} qui permet une mise en place presque instantanée de la gestion des utilisateurs et de la sécurité du site web. Afin de pouvoir être au plus proche du cahier des charges, une adaptation du bundle a du être fait car il ne permettait pas de bloquer la création des utilisateurs uniquement par un administrateur d'une entreprise par exemple.

    Pour toute la partie de la géolocalisation, j'ai effectué une recherche d'outils. Il en est ressorti deux : \osm\cite{osm} et \gmap\cite{gmap}. \osm étant une application gratuite et libre de droit, j'ai essayé de l'intégrer en premier. Il se trouve qu'il n'existe pas d'API\footnote{En informatique, une interface de programmation applicative (souvent désignée par le terme API pour Application Programming Interface) est un ensemble normalisé de classes, de méthodes ou de fonctions qui sert de façade par laquelle un logiciel offre des services à d'autres logiciels. \textit{Wikipedia - septembre 2017}} fournie par l'association gérant \osm mais uniquement des API développées par des tiers qui ont des quotas de requêtes assez bas. Pour pouvoir faire plus de requêtes, soit il faut payer via ces mêmes tiers, soit il faut développer sa propre API client. L'un étant coûteux et l'autre allait me prendre trop de temps. Je me suis donc tourné vers \gmap et son API. Il a été très simple d'intégrer \gmap à mon projet via leur API \js, qui est bien documentée et avec des quotas de requêtes gratuites plus que nécessaire : 25 000 chargement de cartes par jours \cite{gmap_prices}. De plus, une résolution d'adresse est possible en utilisant ce service, ce qui permet de géolocaliser soit via une adresse soit via un clic sur la carte.

    De plus, un début d'intégration a été fait avec la suite de transaction de \lgk pour permettre à un utilisateur de prendre un rendez-vous sur la suite \ulti, développé par \lgk, et que celui ci se retrouve sur son agenda en ligne, ainsi que l'inverse. Le système d'étiquettes permet notamment d'avoir une certaine cohérence entre les logiciels.

    La partie des notifications en temps réel ne peut pas se faire avec \symfony et la technologie \php. En effet, le \php ne permet pas un comportement asynchrone comme le suppose une telle application. Pour se faire, j'ai utilisé un serveur \njs, utilisant une base de données Redis, et un WebSocket\footnote{WebSocket est un standard du Web désignant un protocole réseau de la couche application et une interface de programmation du World Wide Web visant à créer des canaux de communication full-duplex par dessus une connexion TCP. \textit{Wikipedia - septembre 2017}} : \io\cite{io}. L'utilisation de \io a été compliquée car il ne fonctionne pas comme tout le reste du site web. Après quelques jours de travail dessus, j'ai réussi à en comprendre le fonctionnement et à aboutir à une solution où la sécurité de l'application n'est pas remise en cause.

    De par la nature du framework, j'ai été obligé d'utiliser un modèle MVC\footnote{Le patron d'architecture logicielle modèle-vue-contrôleur (en abrégé MVC, en anglais model-view-controller), [...] est un modèle destiné à répondre aux besoins des applications interactives en séparant les problématiques liées aux différents composants au sein de leur architecture respective. \textit{Wikipedia - septembre 2017}}. Grâce à ceci, toutes les parties sont séparées, la relecture du code produit est grandement facilitée. De plus, je me suis efforcé de toujours suivre les mêmes conventions de nommage afin d'avoir un code cohérent à lire. Le modèle (cf. annexe \ref{modele}) a été fait en premier, puis il a subit des évolutions au cours du développement. Le plus gros changement a été l'optimisation pour une utilisation avec une base de donnée, notamment en ajoutant dans de multiples objets la référence d'une Company, permettant de se passer d'une jointure dans de nombreux cas.

    \subsection{La partie ``design''}
    La majeure partie du temps restant à été dédiée à la mise en forme du site web. L'utilisation de \bootstrap\cite{bootstrap} étant jugée trop lourde et lente pour nous, nous avons décidé de faire tout le design avec l'aide de feuilles de CSS minimales\footnote{Les feuilles de style en cascade, généralement appelées CSS de l'anglais Cascading Style Sheets, forment un langage informatique qui décrit la présentation des documents HTML et XML. Les standards définissant CSS sont publiés par le World Wide Web Consortium (W3C). textit{Wikipedia - septembre 2016}} et de scripts \js\cite{js} réduits aux fonctions essentielles. La navigation a été ainsi fluidifiée et le temps de chargement des pages grandement réduit.

    L'utilisation de \jq\cite{jquery} et notamment de son extension \textit{jQuery-UI} a permis d'ajouter des éléments dynamiques dans la page HTML fixe. Par exemple, l'intégration d'un sélecteur de date\footnote{``Date Picker'' en anglais}. Grâce à \jq, le glisser-déposer et l'étirement des cellules à été possible et ce qui rend la navigation plus fluide et moins statique.

    De plus, un réel travail a été mis en œuvre afin de pouvoir s'adapter aussi bien sur mobile que sur ordinateur de bureau. Cette refonte graphique est notamment passée par une utilisation d’icônes à la place de textes et une reformulation de ceux-ci pour les rendre les plus courts et compréhensibles possibles. Cette minimisation permet à un utilisateur mobile de retrouver toute l'interface qu'il connaît sur ordinateur de bureau.

    \subsection{Les limitations}
    Au cours du développement, il est apparu que l'utilisation d'une base de donnée par client n'est pas possible dans le temps qu'il m'était imparti. \symfony n'intègre pas de fonctionnalité pour utiliser des bases de données de manière dynamique, et essayer de passer outre le fonctionnement de \symfony nuirait au bon fonctionnement de la sécurité apportée par ce framework. Cette impossibilité de séparation rend le site plus vulnérable aux incidents. En effet si pour une quelconque raison, la base de donnée venait à être corrompue, tous les clients ne pourraient plus avoir accès à leur agenda en ligne.

\section{Possibilités d'évolution}
    Le site web développé a de nombreux axes d'évolution possibles.

    La séparation des base de données par client est une fonctionnalité importante qui serait intéressante de développer en premier lieu. Ainsi la gestion par entreprise serait grandement facilité et un incident chez un client n’occasionnerai pas de perturbations chez les autres clients.

    Afin de pouvoir s'intégrer au mieux dans le système d'agenda de tous leurs clients, une synchronisation en temps réel peut être développée. Une telle synchronisation permettrait aux utilisateurs de se passer de l'import successif de fichiers .ics comme c'est actuellement le cas.

    La possibilité de pouvoir intégrer des agendas externes devrait possible aussi, que ce soit par URL ou par fichier serait une étape de plus dans la versatilité du site.

\chapter{Conclusion}
    Ce stage m'a permis de perfectionner ma connaissance de \symfony et de toutes ses exigences. Mais j'ai surtout appris à maîtriser de nombreuses technologies comme le \js, le \jq et la gestion de serveurs \njs. Créer ce site web avec des contraintes de temps a été une expérience très enrichissante et formatrice pour moi. Au contact de Jérôme Harlay, j'ai appris de nombreuses choses sur le CSS et sur comment rendre une page ergonomique.

    La mise en service d'\agenda doit permettre à \lgk et à ses clients de se passer des services payants qui représentent un coût non négligeables à l'année.

\appendix
    \chapter{Diagramme de classes}
    \begin{figure}[!ht]
        \centering
        \includegraphics[height=13cm]{UML.png}
        \caption{Diagramme de classes du modèle d'\agenda}
        \label{modele}
    \end{figure}
    % \chapter{Une autre}

\bibliographystyle{unsrt}
\bibliography{biblio}

\newpage
\thispagestyle{empty}
    \section*{Résumé}
    Au cours de ce stage j'ai été amené à être au contact de plusieurs technologies. L'utilisation de chacune d'entre-elles m'a permis de mieux comprendre le travail d'un développeur web et de toutes les contraintes avec lesquelles il doit travailler au quotidien.

    La construction du site web de bout en bout, a été une expérience très enrichissante et m'a permis de comprendre et de mettre en application les techniques de modélisation, de conception et de développement vues en cours. Ainsi j'ai pu manipuler du \php, \js et \jq et mieux comprendre le fonctionnement de chacun de ces langages et leurs champs d'applications.
    \section*{Abstract}
    During this internship, I've been working with many technologies. By using each one of them, I've a better understanding of an web developer and all the constrains which that involve.

    Having started from scratch for the web site building was a very rewarding experience and let me apply all the conception and development methods that I've learn in course. So I used \php, \js and \jq et like that I have now a better comprehension of the this languages and their use domain.

\end{document}
